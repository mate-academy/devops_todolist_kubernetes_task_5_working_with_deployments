apiVersion: apps/v1
kind: Deployment
metadata:
 name: todoapp
 namespace: mateapp
spec:
 strategy:
   type: RollingUpdate
   rollingUpdate:
     maxUnavailable: 1
     maxSurge: 1
 replicas: 2
 selector:
   matchLabels:
     app: todoapp
 template:
   metadata:
     labels:
       app: todoapp
   spec:
     containers:
     - name: todoapp
       resources:
         requests:
           memory: "64Mi"
           cpu: "250m"
         limits:
           memory: "130Mi"
           cpu: "500m"
       image: kagerou4649/todoapp:3.0.2
       imagePullPolicy: Always
       ports:
       - containerPort: 8080
       livenessProbe:
         httpGet:
           path: api/health
           port: 8080
         initialDelaySeconds: 60
         periodSeconds: 5
       readinessProbe:
         httpGet:
           path: api/ready
           port: 8080
         initialDelaySeconds: 5
         periodSeconds: 5
